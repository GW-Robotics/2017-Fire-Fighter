//taking rotation direction for now, assuming undershooting
//turn fan on, try to extinguish the fire
//if not, rotate short amount ~5,10 deg, do twice if fire not out, inch closer
//put out fire and somehow get out
//timings and speeds need review/work
bool extinguish(int rotation_direction){

    
  int current_time = millis();//more efficent than using delay
  
  for(int i = 0; i < 3; i++){
    while(!digitalRead(flame_sensor) && millis - current_time < 1500)//run for 1.5 seconds or fire is put out
      //do nothing
      
    if(digitalRead(flame_sensor))
      return true;
    else
      hDrive(0.0,rotation_direction * 0.5, 0.0);
    delay(200);
    current_time = millis();
    
  }
  //inch forward before looping, rotate in opposite driection
  hDrive(1.0, 0.0, 0.0);
  delay(150);
  return extinguish(-1 * rotation_direction);
  //  No recovery ability, if the fire is not extinguished there is no recovery ability
   
    
} 
bool  scan_room(){

  bool fire_found = false;//used to alter decision making in future rooms in the maze
  int spin_speed= .6;
  int rotation_direction;//-1 for left 1 for right?
  int start_angle = getAngle();
  
  //inch forward
  hDrive(1.0, 0.0, 0.0);
  delay(30);
  hDrive(0.0, 0.0,0.0);
  delay(10);

  //get reading from l,r ultrasonic >> change direction
  //l > r >> rotate to right >> positive second parameter
  rotation_direction = leftUltrasonic.getDistance() > rightUltrasonic.getDistance() ? 1 : -1;
  
  hDrive(1.0, rotation_direction * spin_speed, 0.0);//drive in 360

  //rotate 360 or find fire
  //possibly do in a more efficent way
  while(digitalRead(flame_sensor) && abs(getAngle() - start_angle) < 360){
    
  }
  if(!digitalRead(flame_sensor)){
    digitalWrite(FLAME_LED, HIGH);//turn on LED for fire detection
    fan_motor.set(1);
    fire_found = true;
    extinguish(rotation_direction);
    digitalWrite(FLAME_LED, LOW);//fire extingushed
    /*
     * some how get out of the room
     * possibly take angle at begining of each room and go to 180 + that angle
     */
  }

